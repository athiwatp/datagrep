environment:
  nodejs_version: "6"
  CC: gcc-4.8
  CXX: g++-4.8

# Install scripts. (runs after repo cloning)
install:
  # Get the latest stable version of Node.js
  - ps: Install-Product node $env:nodejs_version

  # install OpenBLAS
  - ps: wget http://github.com/xianyi/OpenBLAS/archive/v0.2.19.zip -OutFile OpenBLAS-v0.2.19-Win64-int32.zip
  - ps: Expand-Archive C:\projects\datagrep\OpenBLAS-v0.2.19-Win64-int32.zip -DestinationPath C:\projects\datagrep
  - cinst msys2
  - ps: $env:Path += ";C:\tools\msys64;C:\tools\msys64\usr\bin"
  - ps: pacman -Sv --noconfirm make gcc gcc-fortran
  - cmd: cd OpenBLAS-0.2.19
  - ps: Get-Location
  - ps: Get-ChildItem
  - ps: cat Makefile
  - ps: make

  # install modules
  - npm install

# Post-install test scripts.
test_script:
  # Output useful info for debugging.
  - node --version
  - npm --version
  # run tests
  - npm test

# Don't actually build.
build: off
